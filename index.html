<html>
	<head>
	</head>
	<body>
		<canvas id="myCanvas" width="800" height="600" style="border:1px solid #000000;"></canvas>

		<script type="text/javascript">
			// var c = document.getElementById("myCanvas");
			// var ctx = c.getContext("2d");
			// ctx.fillStyle = '#f00';
			// ctx.beginPath();
			// ctx.moveTo(0, 0);
			// ctx.lineTo(100,50);
			// ctx.lineTo(50, 100);
			// ctx.lineTo(0, 90);
			// ctx.closePath();
			// ctx.fill();

			String.prototype.hashCode = function() {
				var hash = 0, i, chr, len;
				if (this.length == 0) return hash;
				for (i = 0, len = this.length; i < len; i++) {
					chr   = this.charCodeAt(i);
					hash  = ((hash << 5) - hash) + chr;
					hash |= 0; // Convert to 32bit integer
				}
				return hash;
			};

			var Project = function(canvasId) {
				console.log("Init: Project", canvasId);

				if (!canvasId) {
					return;
				}

				this.canvas = document.getElementById(canvasId);

				this.map = new Map();
			};

			Project.prototype.drawMap = function() {
				console.log("Func: Project::drawMap");

				console.log(this.map);

				for (var t in this.map.tiles) {
					console.log("Tile:", t, this.map.tiles[t]);
				}
			};

			var Map = function () {
				console.log("Init: Map");

				this.tiles = {};
			};

			Map.prototype.addTile = function(tile) {
				console.log("Func: Map::addTile");

				var tileKey = (tile.x + ":" + tile.y).hashCode();
				this.tiles[tileKey] = tile;
			};

			Map.prototype.drawTile = function(tile) {
				console.log("Func: Map::drawTile");
			};

			var Tile = function (x, y, data) {
				console.log("Init: Tile", x, y, data);

				this.x    = x;
				this.y    = y;
				this.data = data;
			};

			var myProject = new Project("myCanvas");

			myProject.map.addTile(new Tile(0,0,{}));
			myProject.map.addTile(new Tile(0,1,{}));
			myProject.map.addTile(new Tile(0,2,{}));
			myProject.map.addTile(new Tile(1,0,{}));
			myProject.map.addTile(new Tile(1,1,{}));
			myProject.map.addTile(new Tile(1,2,{}));
			myProject.map.addTile(new Tile(2,0,{}));
			myProject.map.addTile(new Tile(2,1,{}));
			myProject.map.addTile(new Tile(2,2,{}));

			myProject.drawMap();
		</script>
	</body>
</html>